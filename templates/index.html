[[extend "layout.html"]]

<div v-cloak id="hp-target" class="section">
    <div class="container">
       <div class="columns">
          <div class="column is-two-thirds">
             <p class="title">Hey, [[=username]]</p>
             <p class="subtitle">It's {{formatted_date}}. Here's your overview:</p>
             <div class="level">
                <div class="level-item level-left">
                   <p class="is-size-4 has-text-weight-semibold">Priority Tasks (placeholder)</p>
                </div>
             </div>
             <div @click="placeholder()" class="notification is-danger">
                <div class="columns">
                   <div class="column is-four-fifths">
                      <p class="is-size-5">Ticket 15 | #admin, #s-lab | Contact Lab Manager about 2300 Delaware</p>
                      <p>Due April 21, 2020. <span class="has-text-weight-bold">Three days overdue.</span></p>
                   </div>
                   <div class="column"></div>
                   <div class="column">
                      <div class="buttons">
                         <div class="button is-inverted is-danger is-outlined">
                            <p>Complete</p>
                         </div>
                      </div>
                   </div>
                </div>
             </div>
             <div @click="placeholder()" class="notification is-info">
                <div class="columns">
                   <div class="column is-four-fifths">
                      <p class="is-size-5">Ticket 21 | #software | Submit project proposal for issue tracker in CSE183</p>
                      <p>Due April 24, 2020.</p>
                   </div>
                   <div class="column"></div>
                   <div class="column">
                      <div class="buttons">
                         <div class="button is-inverted is-info is-outlined">
                            <p>Complete</p>
                         </div>
                      </div>
                   </div>
                </div>
             </div>
    
             <div>
                <p class="is-size-4 has-text-weight-semibold">Recent Updates (placeholder)</p>
                <article @click="placeholder()" class="notification">
                   <div class="columns">
                      <div class="column">
                         <div class="">
                            <div class="level-item">
                               <img src="[[=URL('static', 'images/default.JPG')]]" width="80">
                            </div>
                            
                         </div>
                      </div>
                      <div class="column is-four-fifths">
                         <p><span class="has-text-weight-bold">Andrew Gavgavian posted on Ticket 21 "Submitting software proposal for...": </span> 
                         </p><p>"Great work! I think we can start moving this proposal forward. I cleaned up some of the wording 
                            and described some more technical mechanisms.""
                         </p>
                      </div>
                   </div>
                </article>
                <article @click="placeholder()" class="notification">
                   <div class="columns">
                      <div class="column">
                         <div class="">
                            <div class="level-item">
                               <img src="[[=URL('static', 'images/default.JPG')]]" width="80">
                            </div>
                            
                         </div>
                      </div>
                      <div class="column is-four-fifths">
                         <p><span class="has-text-weight-bold">Sam Schmidt posted on Ticket 21 "Submitting software proposal for...": </span> 
                         </p><p>"Added a mockup for the ticket board to the proposal."
                         </p>
                      </div>
                   </div>
                </article>
             </div>
          </div>
          <div class="column is-one-third">
             <div class="box">
                <div class="level">
                   <div class="level-item level-left">
                      <p class="is-size-4 has-text-weight-semibold">Pinned Tickets</p>
                   </div>
                   <!-- TODO: Implement easy pinned ticket modification -->
                   <!-- <div class="level-item level-right buttons">
                      <div class="button">
                         Edit
                      </div>
                   </div> -->
                </div>
               <div class="sluggo_pinned_ticket notification is-info" v-for="pt in pinned_tickets" @click="goToTicket(pt.id)">
                  <div class="columns">
                     <div class="column">
                        <p class="is-size-5">Ticket {{pt.id}} | {{pt.tag_string}} | {{pt.ticket_title}} </p>
                        <!-- <p>Due May 25, 2020.</p> -->
                     </div>
                     <!-- TODO: Determine how to expose ticket completion
                     endpoints on the homepage -->
                     <!-- <div class="column">
                        <div class="buttons">
                           <div class="button is-static">
                              <p>Complete</p>
                           </div>
                        </div>
                     </div> -->
                  <!-- TODO: Progress indicator -->
                  <!-- <div class="columns">
                     <div class="column">
                        <p class="is-size-6 has-text-weight-semibold">50% Complete (2/4)</p>
                        <progress class="progress" value="50" max="100">50%</progress>
                     </div>
                  </div> -->
               </div>
            </div>
             </div>
             <div class="box">
                <div class="level">
                   <div class="level-item level-left">
                      <p class="is-size-4 has-text-weight-semibold">Your Tags</p>
                   </div>
                </div>
                <div class="tile is-ancestor">
                   <div class="tile is-parent is-vertical">
                      <article class="tile is-child notification is-grey-lighter">
                         <p>Admin</p>
                      </article>
                   </div>
                </div>
             </div>
          </div>
       </div>
    </div>
    </div>
    
    [[block page_scripts]]
    <script>
      let date = "[[=XML(date)]]";
      let pinned_tickets = '[[=XML(pinned_tickets)]]';
      let ticket_details_url = '[[=XML(ticket_details_url)]]';
    </script>
    <script src="js/index.js"></script>
    [[end]]